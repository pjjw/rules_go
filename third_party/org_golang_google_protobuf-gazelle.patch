diff -urN a/cmd/protoc-gen-go/BUILD.bazel b/cmd/protoc-gen-go/BUILD.bazel
--- a/cmd/protoc-gen-go/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,31 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_binary", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["main.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go",
+    visibility = ["//visibility:private"],
+    deps = [
+        "//cmd/protoc-gen-go/internal_gengo:go_default_library",
+        "//compiler/protogen:go_default_library",
+        "//internal/version:go_default_library",
+    ],
+)
+
+go_binary(
+    name = "protoc-gen-go",
+    embed = [":go_default_library"],
+    visibility = ["//visibility:public"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["annotation_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//internal/genid:go_default_library",
+        "//proto:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/internal_gengo/BUILD.bazel b/cmd/protoc-gen-go/internal_gengo/BUILD.bazel
--- a/cmd/protoc-gen-go/internal_gengo/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/internal_gengo/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,26 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "init.go",
+        "main.go",
+        "reflect.go",
+        "well_known_types.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/internal_gengo",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//compiler/protogen:go_default_library",
+        "//encoding/protowire:go_default_library",
+        "//internal/encoding/messageset:go_default_library",
+        "//internal/encoding/tag:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/version:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "//types/pluginpb:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/BUILD.bazel b/cmd/protoc-gen-go/testdata/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,33 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_test")
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "gen_test.go",
+        "registry_test.go",
+    ],
+    deps = [
+        "//cmd/protoc-gen-go/testdata/annotations:go_default_library",
+        "//cmd/protoc-gen-go/testdata/comments:go_default_library",
+        "//cmd/protoc-gen-go/testdata/extensions/base:go_default_library",
+        "//cmd/protoc-gen-go/testdata/extensions/ext:go_default_library",
+        "//cmd/protoc-gen-go/testdata/extensions/extra:go_default_library",
+        "//cmd/protoc-gen-go/testdata/extensions/proto3:go_default_library",
+        "//cmd/protoc-gen-go/testdata/fieldnames:go_default_library",
+        "//cmd/protoc-gen-go/testdata/import_public:go_default_library",
+        "//cmd/protoc-gen-go/testdata/import_public/sub:go_default_library",
+        "//cmd/protoc-gen-go/testdata/import_public/sub2:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/fmt:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/test_a_1:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/test_a_2:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/test_b_1:go_default_library",
+        "//cmd/protoc-gen-go/testdata/issue780_oneof_conflict:go_default_library",
+        "//cmd/protoc-gen-go/testdata/nopackage:go_default_library",
+        "//cmd/protoc-gen-go/testdata/proto2:go_default_library",
+        "//cmd/protoc-gen-go/testdata/proto3:go_default_library",
+        "//internal/filedesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/annotations/BUILD.bazel b/cmd/protoc-gen-go/testdata/annotations/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/annotations/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/annotations/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["annotations.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/annotations",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/comments/BUILD.bazel b/cmd/protoc-gen-go/testdata/comments/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/comments/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/comments/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,16 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "comments.pb.go",
+        "deprecated.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/comments",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/extensions/base/BUILD.bazel b/cmd/protoc-gen-go/testdata/extensions/base/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/extensions/base/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/extensions/base/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["base.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/extensions/base",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/extensions/ext/BUILD.bazel b/cmd/protoc-gen-go/testdata/extensions/ext/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/extensions/ext/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/extensions/ext/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["ext.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/extensions/ext",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//cmd/protoc-gen-go/testdata/extensions/base:go_default_library",
+        "//cmd/protoc-gen-go/testdata/extensions/extra:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/extensions/extra/BUILD.bazel b/cmd/protoc-gen-go/testdata/extensions/extra/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/extensions/extra/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/extensions/extra/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["extra.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/extensions/extra",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/extensions/proto3/BUILD.bazel b/cmd/protoc-gen-go/testdata/extensions/proto3/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/extensions/proto3/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/extensions/proto3/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["ext3.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/extensions/proto3",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/fieldnames/BUILD.bazel b/cmd/protoc-gen-go/testdata/fieldnames/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/fieldnames/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/fieldnames/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fieldnames.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/fieldnames",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/import_public/BUILD.bazel b/cmd/protoc-gen-go/testdata/import_public/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/import_public/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/import_public/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,18 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "a.pb.go",
+        "b.pb.go",
+        "c.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/import_public",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//cmd/protoc-gen-go/testdata/import_public/sub:go_default_library",
+        "//cmd/protoc-gen-go/testdata/import_public/sub2:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/import_public/sub/BUILD.bazel b/cmd/protoc-gen-go/testdata/import_public/sub/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/import_public/sub/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/import_public/sub/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,17 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "a.pb.go",
+        "b.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/import_public/sub",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//cmd/protoc-gen-go/testdata/import_public/sub2:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/import_public/sub2/BUILD.bazel b/cmd/protoc-gen-go/testdata/import_public/sub2/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/import_public/sub2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/import_public/sub2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["a.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/import_public/sub2",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/imports/BUILD.bazel b/cmd/protoc-gen-go/testdata/imports/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/imports/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/imports/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,20 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "test_import_a1m1.pb.go",
+        "test_import_a1m2.pb.go",
+        "test_import_all.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/imports",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//cmd/protoc-gen-go/testdata/imports/fmt:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/test_a_1:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/test_a_2:go_default_library",
+        "//cmd/protoc-gen-go/testdata/imports/test_b_1:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/imports/fmt/BUILD.bazel b/cmd/protoc-gen-go/testdata/imports/fmt/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/imports/fmt/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/imports/fmt/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["m.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/imports/fmt",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/imports/test_a_1/BUILD.bazel b/cmd/protoc-gen-go/testdata/imports/test_a_1/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/imports/test_a_1/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/imports/test_a_1/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "m1.pb.go",
+        "m2.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/imports/test_a_1",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/imports/test_a_2/BUILD.bazel b/cmd/protoc-gen-go/testdata/imports/test_a_2/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/imports/test_a_2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/imports/test_a_2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "m3.pb.go",
+        "m4.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/imports/test_a_2",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/imports/test_b_1/BUILD.bazel b/cmd/protoc-gen-go/testdata/imports/test_b_1/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/imports/test_b_1/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/imports/test_b_1/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "m1.pb.go",
+        "m2.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/imports/test_b_1",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/issue780_oneof_conflict/BUILD.bazel b/cmd/protoc-gen-go/testdata/issue780_oneof_conflict/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/issue780_oneof_conflict/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/issue780_oneof_conflict/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/issue780_oneof_conflict",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/nopackage/BUILD.bazel b/cmd/protoc-gen-go/testdata/nopackage/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/nopackage/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/nopackage/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["nopackage.pb.go"],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/nopackage",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/proto2/BUILD.bazel b/cmd/protoc-gen-go/testdata/proto2/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/proto2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/proto2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,17 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "enum.pb.go",
+        "fields.pb.go",
+        "nested_messages.pb.go",
+        "proto2.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/proto2",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/cmd/protoc-gen-go/testdata/proto3/BUILD.bazel b/cmd/protoc-gen-go/testdata/proto3/BUILD.bazel
--- a/cmd/protoc-gen-go/testdata/proto3/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/cmd/protoc-gen-go/testdata/proto3/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "enum.pb.go",
+        "fields.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/cmd/protoc-gen-go/testdata/proto3",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/compiler/protogen/BUILD.bazel b/compiler/protogen/BUILD.bazel
--- a/compiler/protogen/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/compiler/protogen/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,32 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["protogen.go"],
+    importpath = "google.golang.org/protobuf/compiler/protogen",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/strs:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "//types/pluginpb:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["protogen_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "//types/pluginpb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/encoding/BUILD.bazel b/encoding/BUILD.bazel
--- a/encoding/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/encoding/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_test")
+
+go_test(
+    name = "go_default_test",
+    srcs = ["bench_test.go"],
+    deps = [
+        "//encoding/protojson:go_default_library",
+        "//encoding/prototext:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
diff -urN a/encoding/protojson/BUILD.bazel b/encoding/protojson/BUILD.bazel
--- a/encoding/protojson/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/encoding/protojson/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,56 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "decode.go",
+        "doc.go",
+        "encode.go",
+        "well_known_types.go",
+    ],
+    importpath = "google.golang.org/protobuf/encoding/protojson",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//internal/encoding/json:go_default_library",
+        "//internal/encoding/messageset:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/set:go_default_library",
+        "//internal/strs:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "bench_test.go",
+        "decode_test.go",
+        "encode_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test/weak1:go_default_library",
+        "//internal/testprotos/textpb2:go_default_library",
+        "//internal/testprotos/textpb3:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//testing/protopack:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/durationpb:go_default_library",
+        "//types/known/emptypb:go_default_library",
+        "//types/known/fieldmaskpb:go_default_library",
+        "//types/known/structpb:go_default_library",
+        "//types/known/timestamppb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/encoding/prototext/BUILD.bazel b/encoding/prototext/BUILD.bazel
--- a/encoding/prototext/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/encoding/prototext/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,55 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "decode.go",
+        "doc.go",
+        "encode.go",
+    ],
+    importpath = "google.golang.org/protobuf/encoding/prototext",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/encoding/messageset:go_default_library",
+        "//internal/encoding/text:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/mapsort:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/set:go_default_library",
+        "//internal/strs:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "decode_test.go",
+        "encode_test.go",
+        "other_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test/weak1:go_default_library",
+        "//internal/testprotos/textpb2:go_default_library",
+        "//internal/testprotos/textpb3:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//testing/protopack:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/durationpb:go_default_library",
+        "//types/known/emptypb:go_default_library",
+        "//types/known/structpb:go_default_library",
+        "//types/known/timestamppb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/encoding/protowire/BUILD.bazel b/encoding/protowire/BUILD.bazel
--- a/encoding/protowire/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/encoding/protowire/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["wire.go"],
+    importpath = "google.golang.org/protobuf/encoding/protowire",
+    visibility = ["//visibility:public"],
+    deps = ["//internal/errors:go_default_library"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["wire_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/benchmarks/BUILD.bazel b/internal/benchmarks/BUILD.bazel
--- a/internal/benchmarks/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/benchmarks/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_test")
+
+go_test(
+    name = "go_default_test",
+    srcs = ["bench_test.go"],
+    deps = [
+        "//encoding/protojson:go_default_library",
+        "//encoding/prototext:go_default_library",
+        "//internal/testprotos/benchmarks:go_default_library",
+        "//internal/testprotos/benchmarks/datasets/google_message1/proto2:go_default_library",
+        "//internal/testprotos/benchmarks/datasets/google_message1/proto3:go_default_library",
+        "//internal/testprotos/benchmarks/datasets/google_message2:go_default_library",
+        "//internal/testprotos/benchmarks/datasets/google_message3:go_default_library",
+        "//internal/testprotos/benchmarks/datasets/google_message4:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
diff -urN a/internal/benchmarks/micro/BUILD.bazel b/internal/benchmarks/micro/BUILD.bazel
--- a/internal/benchmarks/micro/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/benchmarks/micro/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_test")
+
+go_test(
+    name = "go_default_test",
+    srcs = ["micro_test.go"],
+    deps = [
+        "//internal/impl:go_default_library",
+        "//internal/testprotos/benchmarks/micro:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//proto:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//types/known/emptypb:go_default_library",
+    ],
+)
diff -urN a/internal/cmd/generate-corpus/BUILD.bazel b/internal/cmd/generate-corpus/BUILD.bazel
--- a/internal/cmd/generate-corpus/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/cmd/generate-corpus/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,21 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_binary", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["main.go"],
+    importpath = "google.golang.org/protobuf/internal/cmd/generate-corpus",
+    visibility = ["//visibility:private"],
+    deps = [
+        "//encoding/protojson:go_default_library",
+        "//encoding/prototext:go_default_library",
+        "//internal/testprotos/fuzz:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//proto:go_default_library",
+    ],
+)
+
+go_binary(
+    name = "generate-corpus",
+    embed = [":go_default_library"],
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/cmd/generate-protos/BUILD.bazel b/internal/cmd/generate-protos/BUILD.bazel
--- a/internal/cmd/generate-protos/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/cmd/generate-protos/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_binary", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["main.go"],
+    importpath = "google.golang.org/protobuf/internal/cmd/generate-protos",
+    visibility = ["//visibility:private"],
+    deps = [
+        "//cmd/protoc-gen-go/internal_gengo:go_default_library",
+        "//compiler/protogen:go_default_library",
+        "//internal/detrand:go_default_library",
+    ],
+)
+
+go_binary(
+    name = "generate-protos",
+    embed = [":go_default_library"],
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/cmd/generate-types/BUILD.bazel b/internal/cmd/generate-types/BUILD.bazel
--- a/internal/cmd/generate-types/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/cmd/generate-types/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,18 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_binary", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "impl.go",
+        "main.go",
+        "proto.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/cmd/generate-types",
+    visibility = ["//visibility:private"],
+)
+
+go_binary(
+    name = "generate-types",
+    embed = [":go_default_library"],
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/cmd/pbdump/BUILD.bazel b/internal/cmd/pbdump/BUILD.bazel
--- a/internal/cmd/pbdump/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/cmd/pbdump/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,35 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_binary", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["pbdump.go"],
+    importpath = "google.golang.org/protobuf/internal/cmd/pbdump",
+    visibility = ["//visibility:private"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/errors:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//testing/protopack:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
+
+go_binary(
+    name = "pbdump",
+    embed = [":go_default_library"],
+    visibility = ["//:__subpackages__"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["pbdump_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/internal/conformance/BUILD.bazel b/internal/conformance/BUILD.bazel
--- a/internal/conformance/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/conformance/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_test")
+
+go_test(
+    name = "go_default_test",
+    srcs = ["conformance_test.go"],
+    deps = [
+        "//encoding/protojson:go_default_library",
+        "//encoding/prototext:go_default_library",
+        "//internal/testprotos/conformance:go_default_library",
+        "//proto:go_default_library",
+    ],
+)
diff -urN a/internal/descfmt/BUILD.bazel b/internal/descfmt/BUILD.bazel
--- a/internal/descfmt/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/descfmt/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["stringer.go"],
+    importpath = "google.golang.org/protobuf/internal/descfmt",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["desc_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/descopts/BUILD.bazel b/internal/descopts/BUILD.bazel
--- a/internal/descopts/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/descopts/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["options.go"],
+    importpath = "google.golang.org/protobuf/internal/descopts",
+    visibility = ["//:__subpackages__"],
+    deps = ["//reflect/protoreflect:go_default_library"],
+)
diff -urN a/internal/detrand/BUILD.bazel b/internal/detrand/BUILD.bazel
--- a/internal/detrand/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/detrand/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["rand.go"],
+    importpath = "google.golang.org/protobuf/internal/detrand",
+    visibility = ["//:__subpackages__"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["rand_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/encoding/defval/BUILD.bazel b/internal/encoding/defval/BUILD.bazel
--- a/internal/encoding/defval/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/encoding/defval/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,23 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["default.go"],
+    importpath = "google.golang.org/protobuf/internal/encoding/defval",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/encoding/text:go_default_library",
+        "//internal/errors:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["default_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/filedesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
diff -urN a/internal/encoding/json/BUILD.bazel b/internal/encoding/json/BUILD.bazel
--- a/internal/encoding/json/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/encoding/json/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,34 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "decode.go",
+        "decode_number.go",
+        "decode_string.go",
+        "decode_token.go",
+        "encode.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/encoding/json",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/strs:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "bench_test.go",
+        "decode_test.go",
+        "encode_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/internal/encoding/messageset/BUILD.bazel b/internal/encoding/messageset/BUILD.bazel
--- a/internal/encoding/messageset/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/encoding/messageset/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["messageset.go"],
+    importpath = "google.golang.org/protobuf/internal/encoding/messageset",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/errors:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
diff -urN a/internal/encoding/tag/BUILD.bazel b/internal/encoding/tag/BUILD.bazel
--- a/internal/encoding/tag/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/encoding/tag/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,26 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["tag.go"],
+    importpath = "google.golang.org/protobuf/internal/encoding/tag",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/encoding/defval:go_default_library",
+        "//internal/filedesc:go_default_library",
+        "//internal/strs:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["tag_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/filedesc:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
diff -urN a/internal/encoding/text/BUILD.bazel b/internal/encoding/text/BUILD.bazel
--- a/internal/encoding/text/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/encoding/text/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,35 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "decode.go",
+        "decode_number.go",
+        "decode_string.go",
+        "decode_token.go",
+        "doc.go",
+        "encode.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/encoding/text",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/strs:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "decode_test.go",
+        "encode_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/flags:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/internal/errors/BUILD.bazel b/internal/errors/BUILD.bazel
--- a/internal/errors/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/errors/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "errors.go",
+        "is_go112.go",
+        "is_go113.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/errors",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/detrand:go_default_library"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["errors_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/fieldsort/BUILD.bazel b/internal/fieldsort/BUILD.bazel
--- a/internal/fieldsort/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/fieldsort/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fieldsort.go"],
+    importpath = "google.golang.org/protobuf/internal/fieldsort",
+    visibility = ["//:__subpackages__"],
+    deps = ["//reflect/protoreflect:go_default_library"],
+)
diff -urN a/internal/filedesc/BUILD.bazel b/internal/filedesc/BUILD.bazel
--- a/internal/filedesc/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/filedesc/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,48 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "build.go",
+        "desc.go",
+        "desc_init.go",
+        "desc_lazy.go",
+        "desc_list.go",
+        "desc_list_gen.go",
+        "placeholder.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/filedesc",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/descfmt:go_default_library",
+        "//internal/descopts:go_default_library",
+        "//internal/encoding/defval:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/strs:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "build_test.go",
+        "desc_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test/weak1:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/internal/filetype/BUILD.bazel b/internal/filetype/BUILD.bazel
--- a/internal/filetype/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/filetype/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["build.go"],
+    importpath = "google.golang.org/protobuf/internal/filetype",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/descopts:go_default_library",
+        "//internal/filedesc:go_default_library",
+        "//internal/impl:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
diff -urN a/internal/flags/BUILD.bazel b/internal/flags/BUILD.bazel
--- a/internal/flags/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/flags/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,11 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "flags.go",
+        "proto_legacy_disable.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/flags",
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/fuzz/jsonfuzz/BUILD.bazel b/internal/fuzz/jsonfuzz/BUILD.bazel
--- a/internal/fuzz/jsonfuzz/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/fuzz/jsonfuzz/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,20 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fuzz.go"],
+    importpath = "google.golang.org/protobuf/internal/fuzz/jsonfuzz",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/protojson:go_default_library",
+        "//internal/testprotos/fuzz:go_default_library",
+        "//proto:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["fuzz_test.go"],
+    embed = [":go_default_library"],
+    deps = ["//internal/fuzztest:go_default_library"],
+)
diff -urN a/internal/fuzz/textfuzz/BUILD.bazel b/internal/fuzz/textfuzz/BUILD.bazel
--- a/internal/fuzz/textfuzz/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/fuzz/textfuzz/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,20 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fuzz.go"],
+    importpath = "google.golang.org/protobuf/internal/fuzz/textfuzz",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//internal/testprotos/fuzz:go_default_library",
+        "//proto:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["fuzz_test.go"],
+    embed = [":go_default_library"],
+    deps = ["//internal/fuzztest:go_default_library"],
+)
diff -urN a/internal/fuzz/wirefuzz/BUILD.bazel b/internal/fuzz/wirefuzz/BUILD.bazel
--- a/internal/fuzz/wirefuzz/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/fuzz/wirefuzz/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,22 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fuzz.go"],
+    importpath = "google.golang.org/protobuf/internal/fuzz/wirefuzz",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/impl:go_default_library",
+        "//internal/testprotos/fuzz:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["fuzz_test.go"],
+    embed = [":go_default_library"],
+    deps = ["//internal/fuzztest:go_default_library"],
+)
diff -urN a/internal/fuzztest/BUILD.bazel b/internal/fuzztest/BUILD.bazel
--- a/internal/fuzztest/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/fuzztest/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,8 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fuzztest.go"],
+    importpath = "google.golang.org/protobuf/internal/fuzztest",
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/genid/BUILD.bazel b/internal/genid/BUILD.bazel
--- a/internal/genid/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/genid/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,25 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "any_gen.go",
+        "api_gen.go",
+        "descriptor_gen.go",
+        "doc.go",
+        "duration_gen.go",
+        "empty_gen.go",
+        "field_mask_gen.go",
+        "goname.go",
+        "map_entry.go",
+        "source_context_gen.go",
+        "struct_gen.go",
+        "timestamp_gen.go",
+        "type_gen.go",
+        "wrappers.go",
+        "wrappers_gen.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/genid",
+    visibility = ["//:__subpackages__"],
+    deps = ["//reflect/protoreflect:go_default_library"],
+)
diff -urN a/internal/impl/BUILD.bazel b/internal/impl/BUILD.bazel
--- a/internal/impl/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/impl/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,103 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "api_export.go",
+        "checkinit.go",
+        "codec_extension.go",
+        "codec_field.go",
+        "codec_gen.go",
+        "codec_map.go",
+        "codec_map_go111.go",
+        "codec_map_go112.go",
+        "codec_message.go",
+        "codec_messageset.go",
+        "codec_tables.go",
+        "codec_unsafe.go",
+        "convert.go",
+        "convert_list.go",
+        "convert_map.go",
+        "decode.go",
+        "encode.go",
+        "enum.go",
+        "extension.go",
+        "legacy_enum.go",
+        "legacy_export.go",
+        "legacy_extension.go",
+        "legacy_file.go",
+        "legacy_message.go",
+        "merge.go",
+        "merge_gen.go",
+        "message.go",
+        "message_reflect.go",
+        "message_reflect_field.go",
+        "message_reflect_gen.go",
+        "pointer_unsafe.go",
+        "validate.go",
+        "weak.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/impl",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//encoding/protowire:go_default_library",
+        "//internal/descopts:go_default_library",
+        "//internal/encoding/messageset:go_default_library",
+        "//internal/encoding/tag:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/fieldsort:go_default_library",
+        "//internal/filedesc:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/strs:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "enum_test.go",
+        "extension_test.go",
+        "lazy_test.go",
+        "legacy_aberrant_test.go",
+        "legacy_export_test.go",
+        "legacy_file_test.go",
+        "legacy_test.go",
+        "message_reflect_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/protobuild:go_default_library",
+        "//internal/testprotos/legacy/proto2_20160225_2fc053c5:go_default_library",
+        "//internal/testprotos/legacy/proto2_20160519_a4ab9ec5:go_default_library",
+        "//internal/testprotos/legacy/proto2_20180125_92554152:go_default_library",
+        "//internal/testprotos/legacy/proto2_20180430_b4deda09:go_default_library",
+        "//internal/testprotos/legacy/proto2_20180814_aa810b61:go_default_library",
+        "//internal/testprotos/legacy/proto2_20190205_c823c79e:go_default_library",
+        "//internal/testprotos/legacy/proto3_20160225_2fc053c5:go_default_library",
+        "//internal/testprotos/legacy/proto3_20160519_a4ab9ec5:go_default_library",
+        "//internal/testprotos/legacy/proto3_20180125_92554152:go_default_library",
+        "//internal/testprotos/legacy/proto3_20180430_b4deda09:go_default_library",
+        "//internal/testprotos/legacy/proto3_20180814_aa810b61:go_default_library",
+        "//internal/testprotos/legacy/proto3_20190205_c823c79e:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/internal/mapsort/BUILD.bazel b/internal/mapsort/BUILD.bazel
--- a/internal/mapsort/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/mapsort/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["mapsort.go"],
+    importpath = "google.golang.org/protobuf/internal/mapsort",
+    visibility = ["//:__subpackages__"],
+    deps = ["//reflect/protoreflect:go_default_library"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["mapsort_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/testprotos/test:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
diff -urN a/internal/msgfmt/BUILD.bazel b/internal/msgfmt/BUILD.bazel
--- a/internal/msgfmt/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/msgfmt/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,37 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["format.go"],
+    importpath = "google.golang.org/protobuf/internal/msgfmt",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/detrand:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/mapsort:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["format_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/textpb2:go_default_library",
+        "//proto:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "//testing/protopack:go_default_library",
+        "//types/dynamicpb:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/durationpb:go_default_library",
+        "//types/known/timestamppb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/internal/pragma/BUILD.bazel b/internal/pragma/BUILD.bazel
--- a/internal/pragma/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/pragma/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,8 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["pragma.go"],
+    importpath = "google.golang.org/protobuf/internal/pragma",
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/protobuild/BUILD.bazel b/internal/protobuild/BUILD.bazel
--- a/internal/protobuild/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/protobuild/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["build.go"],
+    importpath = "google.golang.org/protobuf/internal/protobuild",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
diff -urN a/internal/protolegacy/BUILD.bazel b/internal/protolegacy/BUILD.bazel
--- a/internal/protolegacy/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/protolegacy/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["proto.go"],
+    importpath = "google.golang.org/protobuf/internal/protolegacy",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/set/BUILD.bazel b/internal/set/BUILD.bazel
--- a/internal/set/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/set/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["ints.go"],
+    importpath = "google.golang.org/protobuf/internal/set",
+    visibility = ["//:__subpackages__"],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["ints_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/strs/BUILD.bazel b/internal/strs/BUILD.bazel
--- a/internal/strs/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/strs/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,21 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "strings.go",
+        "strings_unsafe.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/strs",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/flags:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["strings_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/testprotos/annotation/BUILD.bazel b/internal/testprotos/annotation/BUILD.bazel
--- a/internal/testprotos/annotation/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/annotation/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["annotation.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/annotation",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/BUILD.bazel b/internal/testprotos/benchmarks/BUILD.bazel
--- a/internal/testprotos/benchmarks/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["benchmarks.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/datasets/google_message1/proto2/BUILD.bazel b/internal/testprotos/benchmarks/datasets/google_message1/proto2/BUILD.bazel
--- a/internal/testprotos/benchmarks/datasets/google_message1/proto2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/datasets/google_message1/proto2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["benchmark_message1_proto2.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks/datasets/google_message1/proto2",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/datasets/google_message1/proto3/BUILD.bazel b/internal/testprotos/benchmarks/datasets/google_message1/proto3/BUILD.bazel
--- a/internal/testprotos/benchmarks/datasets/google_message1/proto3/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/datasets/google_message1/proto3/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["benchmark_message1_proto3.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks/datasets/google_message1/proto3",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/datasets/google_message2/BUILD.bazel b/internal/testprotos/benchmarks/datasets/google_message2/BUILD.bazel
--- a/internal/testprotos/benchmarks/datasets/google_message2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/datasets/google_message2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["benchmark_message2.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks/datasets/google_message2",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/datasets/google_message3/BUILD.bazel b/internal/testprotos/benchmarks/datasets/google_message3/BUILD.bazel
--- a/internal/testprotos/benchmarks/datasets/google_message3/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/datasets/google_message3/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,23 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "benchmark_message3.pb.go",
+        "benchmark_message3_1.pb.go",
+        "benchmark_message3_2.pb.go",
+        "benchmark_message3_3.pb.go",
+        "benchmark_message3_4.pb.go",
+        "benchmark_message3_5.pb.go",
+        "benchmark_message3_6.pb.go",
+        "benchmark_message3_7.pb.go",
+        "benchmark_message3_8.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks/datasets/google_message3",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/datasets/google_message4/BUILD.bazel b/internal/testprotos/benchmarks/datasets/google_message4/BUILD.bazel
--- a/internal/testprotos/benchmarks/datasets/google_message4/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/datasets/google_message4/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,18 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "benchmark_message4.pb.go",
+        "benchmark_message4_1.pb.go",
+        "benchmark_message4_2.pb.go",
+        "benchmark_message4_3.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks/datasets/google_message4",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/benchmarks/micro/BUILD.bazel b/internal/testprotos/benchmarks/micro/BUILD.bazel
--- a/internal/testprotos/benchmarks/micro/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/benchmarks/micro/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["micro.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/benchmarks/micro",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/conformance/BUILD.bazel b/internal/testprotos/conformance/BUILD.bazel
--- a/internal/testprotos/conformance/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/conformance/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,23 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "conformance.pb.go",
+        "test_messages_proto2.pb.go",
+        "test_messages_proto3.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/testprotos/conformance",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/durationpb:go_default_library",
+        "//types/known/fieldmaskpb:go_default_library",
+        "//types/known/structpb:go_default_library",
+        "//types/known/timestamppb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/fieldtrack/BUILD.bazel b/internal/testprotos/fieldtrack/BUILD.bazel
--- a/internal/testprotos/fieldtrack/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/fieldtrack/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fieldtrack.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/fieldtrack",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/testprotos/annotation:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/fuzz/BUILD.bazel b/internal/testprotos/fuzz/BUILD.bazel
--- a/internal/testprotos/fuzz/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/fuzz/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["fuzz.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/fuzz",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test3:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/irregular/BUILD.bazel b/internal/testprotos/irregular/BUILD.bazel
--- a/internal/testprotos/irregular/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/irregular/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "irregular.go",
+        "test.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/testprotos/irregular",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/legacy/BUILD.bazel b/internal/testprotos/legacy/BUILD.bazel
--- a/internal/testprotos/legacy/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,24 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["legacy.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/testprotos/legacy/proto2_20160225_2fc053c5:go_default_library",
+        "//internal/testprotos/legacy/proto2_20160519_a4ab9ec5:go_default_library",
+        "//internal/testprotos/legacy/proto2_20180125_92554152:go_default_library",
+        "//internal/testprotos/legacy/proto2_20180430_b4deda09:go_default_library",
+        "//internal/testprotos/legacy/proto2_20180814_aa810b61:go_default_library",
+        "//internal/testprotos/legacy/proto2_20190205_c823c79e:go_default_library",
+        "//internal/testprotos/legacy/proto3_20160225_2fc053c5:go_default_library",
+        "//internal/testprotos/legacy/proto3_20160519_a4ab9ec5:go_default_library",
+        "//internal/testprotos/legacy/proto3_20180125_92554152:go_default_library",
+        "//internal/testprotos/legacy/proto3_20180430_b4deda09:go_default_library",
+        "//internal/testprotos/legacy/proto3_20180814_aa810b61:go_default_library",
+        "//internal/testprotos/legacy/proto3_20190205_c823c79e:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/legacy/bug1052/BUILD.bazel b/internal/testprotos/legacy/bug1052/BUILD.bazel
--- a/internal/testprotos/legacy/bug1052/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/bug1052/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,18 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["bug1052.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/bug1052",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/protolegacy:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["bug1052_test.go"],
+    embed = [":go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto2_20160225_2fc053c5/BUILD.bazel b/internal/testprotos/legacy/proto2_20160225_2fc053c5/BUILD.bazel
--- a/internal/testprotos/legacy/proto2_20160225_2fc053c5/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto2_20160225_2fc053c5/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto2_20160225_2fc053c5",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto2_20160519_a4ab9ec5/BUILD.bazel b/internal/testprotos/legacy/proto2_20160519_a4ab9ec5/BUILD.bazel
--- a/internal/testprotos/legacy/proto2_20160519_a4ab9ec5/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto2_20160519_a4ab9ec5/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto2_20160519_a4ab9ec5",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto2_20180125_92554152/BUILD.bazel b/internal/testprotos/legacy/proto2_20180125_92554152/BUILD.bazel
--- a/internal/testprotos/legacy/proto2_20180125_92554152/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto2_20180125_92554152/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto2_20180125_92554152",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto2_20180430_b4deda09/BUILD.bazel b/internal/testprotos/legacy/proto2_20180430_b4deda09/BUILD.bazel
--- a/internal/testprotos/legacy/proto2_20180430_b4deda09/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto2_20180430_b4deda09/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto2_20180430_b4deda09",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto2_20180814_aa810b61/BUILD.bazel b/internal/testprotos/legacy/proto2_20180814_aa810b61/BUILD.bazel
--- a/internal/testprotos/legacy/proto2_20180814_aa810b61/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto2_20180814_aa810b61/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto2_20180814_aa810b61",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto2_20190205_c823c79e/BUILD.bazel b/internal/testprotos/legacy/proto2_20190205_c823c79e/BUILD.bazel
--- a/internal/testprotos/legacy/proto2_20190205_c823c79e/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto2_20190205_c823c79e/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto2_20190205_c823c79e",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto3_20160225_2fc053c5/BUILD.bazel b/internal/testprotos/legacy/proto3_20160225_2fc053c5/BUILD.bazel
--- a/internal/testprotos/legacy/proto3_20160225_2fc053c5/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto3_20160225_2fc053c5/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto3_20160225_2fc053c5",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto3_20160519_a4ab9ec5/BUILD.bazel b/internal/testprotos/legacy/proto3_20160519_a4ab9ec5/BUILD.bazel
--- a/internal/testprotos/legacy/proto3_20160519_a4ab9ec5/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto3_20160519_a4ab9ec5/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto3_20160519_a4ab9ec5",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto3_20180125_92554152/BUILD.bazel b/internal/testprotos/legacy/proto3_20180125_92554152/BUILD.bazel
--- a/internal/testprotos/legacy/proto3_20180125_92554152/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto3_20180125_92554152/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto3_20180125_92554152",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto3_20180430_b4deda09/BUILD.bazel b/internal/testprotos/legacy/proto3_20180430_b4deda09/BUILD.bazel
--- a/internal/testprotos/legacy/proto3_20180430_b4deda09/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto3_20180430_b4deda09/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto3_20180430_b4deda09",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto3_20180814_aa810b61/BUILD.bazel b/internal/testprotos/legacy/proto3_20180814_aa810b61/BUILD.bazel
--- a/internal/testprotos/legacy/proto3_20180814_aa810b61/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto3_20180814_aa810b61/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto3_20180814_aa810b61",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/legacy/proto3_20190205_c823c79e/BUILD.bazel b/internal/testprotos/legacy/proto3_20190205_c823c79e/BUILD.bazel
--- a/internal/testprotos/legacy/proto3_20190205_c823c79e/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/legacy/proto3_20190205_c823c79e/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/legacy/proto3_20190205_c823c79e",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/protolegacy:go_default_library"],
+)
diff -urN a/internal/testprotos/messageset/messagesetpb/BUILD.bazel b/internal/testprotos/messageset/messagesetpb/BUILD.bazel
--- a/internal/testprotos/messageset/messagesetpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/messageset/messagesetpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["message_set.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/messageset/messagesetpb",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/messageset/msetextpb/BUILD.bazel b/internal/testprotos/messageset/msetextpb/BUILD.bazel
--- a/internal/testprotos/messageset/msetextpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/messageset/msetextpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["msetextpb.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/messageset/msetextpb",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//internal/testprotos/messageset/messagesetpb:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/order/BUILD.bazel b/internal/testprotos/order/BUILD.bazel
--- a/internal/testprotos/order/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/order/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["order.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/order",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/registry/BUILD.bazel b/internal/testprotos/registry/BUILD.bazel
--- a/internal/testprotos/registry/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/registry/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/registry",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/required/BUILD.bazel b/internal/testprotos/required/BUILD.bazel
--- a/internal/testprotos/required/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/required/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["required.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/required",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/test/BUILD.bazel b/internal/testprotos/test/BUILD.bazel
--- a/internal/testprotos/test/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/test/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,19 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "ext.pb.go",
+        "test.pb.go",
+        "test_import.pb.go",
+        "test_public.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/testprotos/test",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/test/weak1/BUILD.bazel b/internal/testprotos/test/weak1/BUILD.bazel
--- a/internal/testprotos/test/weak1/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/test/weak1/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test_weak.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/test/weak1",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/test/weak2/BUILD.bazel b/internal/testprotos/test/weak2/BUILD.bazel
--- a/internal/testprotos/test/weak2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/test/weak2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test_weak.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/test/weak2",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/test3/BUILD.bazel b/internal/testprotos/test3/BUILD.bazel
--- a/internal/testprotos/test3/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/test3/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,17 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "test.pb.go",
+        "test_extension.pb.go",
+        "test_import.pb.go",
+    ],
+    importpath = "google.golang.org/protobuf/internal/testprotos/test3",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/textpb2/BUILD.bazel b/internal/testprotos/textpb2/BUILD.bazel
--- a/internal/testprotos/textpb2/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/textpb2/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,20 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/textpb2",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/durationpb:go_default_library",
+        "//types/known/emptypb:go_default_library",
+        "//types/known/fieldmaskpb:go_default_library",
+        "//types/known/structpb:go_default_library",
+        "//types/known/timestamppb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+    ],
+)
diff -urN a/internal/testprotos/textpb3/BUILD.bazel b/internal/testprotos/textpb3/BUILD.bazel
--- a/internal/testprotos/textpb3/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/testprotos/textpb3/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["test.pb.go"],
+    importpath = "google.golang.org/protobuf/internal/testprotos/textpb3",
+    visibility = ["//:__subpackages__"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/internal/version/BUILD.bazel b/internal/version/BUILD.bazel
--- a/internal/version/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/version/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,8 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["version.go"],
+    importpath = "google.golang.org/protobuf/internal/version",
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/internal/weakdeps/BUILD.bazel b/internal/weakdeps/BUILD.bazel
--- a/internal/weakdeps/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/internal/weakdeps/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,8 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["doc.go"],
+    importpath = "google.golang.org/protobuf/internal/weakdeps",
+    visibility = ["//:__subpackages__"],
+)
diff -urN a/proto/BUILD.bazel b/proto/BUILD.bazel
--- a/proto/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/proto/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,88 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "checkinit.go",
+        "decode.go",
+        "decode_gen.go",
+        "doc.go",
+        "encode.go",
+        "encode_gen.go",
+        "equal.go",
+        "extension.go",
+        "merge.go",
+        "messageset.go",
+        "proto.go",
+        "proto_methods.go",
+        "reset.go",
+        "size.go",
+        "size_gen.go",
+        "wrappers.go",
+    ],
+    importpath = "google.golang.org/protobuf/proto",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/encoding/messageset:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/fieldsort:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/mapsort:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/strs:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "bench_test.go",
+        "checkinit_test.go",
+        "decode_test.go",
+        "encode_test.go",
+        "equal_test.go",
+        "extension_test.go",
+        "merge_test.go",
+        "messageset_test.go",
+        "methods_test.go",
+        "nil_test.go",
+        "noenforceutf8_test.go",
+        "reset_test.go",
+        "testmessages_test.go",
+        "validate_test.go",
+        "weak_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//encoding/protowire:go_default_library",
+        "//internal/filedesc:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/impl:go_default_library",
+        "//internal/protobuild:go_default_library",
+        "//internal/testprotos/legacy:go_default_library",
+        "//internal/testprotos/legacy/proto2_20160225_2fc053c5:go_default_library",
+        "//internal/testprotos/messageset/messagesetpb:go_default_library",
+        "//internal/testprotos/messageset/msetextpb:go_default_library",
+        "//internal/testprotos/order:go_default_library",
+        "//internal/testprotos/required:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test/weak1:go_default_library",
+        "//internal/testprotos/test3:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "//testing/protopack:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "//types/dynamicpb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/reflect/protodesc/BUILD.bazel b/reflect/protodesc/BUILD.bazel
--- a/reflect/protodesc/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/reflect/protodesc/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,42 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "desc.go",
+        "desc_init.go",
+        "desc_resolve.go",
+        "desc_validate.go",
+        "proto.go",
+    ],
+    importpath = "google.golang.org/protobuf/reflect/protodesc",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/encoding/defval:go_default_library",
+        "//internal/errors:go_default_library",
+        "//internal/filedesc:go_default_library",
+        "//internal/flags:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/pragma:go_default_library",
+        "//internal/strs:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["file_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//internal/flags:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
diff -urN a/reflect/protoreflect/BUILD.bazel b/reflect/protoreflect/BUILD.bazel
--- a/reflect/protoreflect/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/reflect/protoreflect/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,29 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "methods.go",
+        "proto.go",
+        "source.go",
+        "type.go",
+        "value.go",
+        "value_union.go",
+        "value_unsafe.go",
+    ],
+    importpath = "google.golang.org/protobuf/reflect/protoreflect",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/pragma:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "proto_test.go",
+        "value_test.go",
+    ],
+    embed = [":go_default_library"],
+)
diff -urN a/reflect/protoregistry/BUILD.bazel b/reflect/protoregistry/BUILD.bazel
--- a/reflect/protoregistry/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/reflect/protoregistry/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,28 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["registry.go"],
+    importpath = "google.golang.org/protobuf/reflect/protoregistry",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//internal/errors:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["registry_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//internal/impl:go_default_library",
+        "//internal/testprotos/registry:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/runtime/protoiface/BUILD.bazel b/runtime/protoiface/BUILD.bazel
--- a/runtime/protoiface/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/runtime/protoiface/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,15 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "legacy.go",
+        "methods.go",
+    ],
+    importpath = "google.golang.org/protobuf/runtime/protoiface",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//internal/pragma:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
diff -urN a/runtime/protoimpl/BUILD.bazel b/runtime/protoimpl/BUILD.bazel
--- a/runtime/protoimpl/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/runtime/protoimpl/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,17 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "impl.go",
+        "version.go",
+    ],
+    importpath = "google.golang.org/protobuf/runtime/protoimpl",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//internal/filedesc:go_default_library",
+        "//internal/filetype:go_default_library",
+        "//internal/impl:go_default_library",
+        "//internal/version:go_default_library",
+    ],
+)
diff -urN a/testing/protocmp/BUILD.bazel b/testing/protocmp/BUILD.bazel
--- a/testing/protocmp/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/testing/protocmp/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,46 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "reflect.go",
+        "util.go",
+        "xform.go",
+    ],
+    importpath = "google.golang.org/protobuf/testing/protocmp",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//internal/genid:go_default_library",
+        "//internal/msgfmt:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = [
+        "reflect_test.go",
+        "util_test.go",
+        "xform_test.go",
+    ],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/textpb2:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//testing/protopack:go_default_library",
+        "//types/dynamicpb:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/testing/protopack/BUILD.bazel b/testing/protopack/BUILD.bazel
--- a/testing/protopack/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/testing/protopack/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,25 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["pack.go"],
+    importpath = "google.golang.org/protobuf/testing/protopack",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protowire:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["pack_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//reflect/protodesc:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//types/descriptorpb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/testing/prototest/BUILD.bazel b/testing/prototest/BUILD.bazel
--- a/testing/prototest/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/testing/prototest/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,36 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "enum.go",
+        "prototest.go",
+    ],
+    importpath = "google.golang.org/protobuf/testing/prototest",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/prototext:go_default_library",
+        "//encoding/protowire:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["prototest_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/flags:go_default_library",
+        "//internal/testprotos/irregular:go_default_library",
+        "//internal/testprotos/legacy:go_default_library",
+        "//internal/testprotos/legacy/proto2_20160225_2fc053c5:go_default_library",
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test/weak1:go_default_library",
+        "//internal/testprotos/test/weak2:go_default_library",
+        "//internal/testprotos/test3:go_default_library",
+        "//proto:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/types/descriptorpb/BUILD.bazel b/types/descriptorpb/BUILD.bazel
--- a/types/descriptorpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/descriptorpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["descriptor.pb.go"],
+    importpath = "google.golang.org/protobuf/types/descriptorpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/types/dynamicpb/BUILD.bazel b/types/dynamicpb/BUILD.bazel
--- a/types/dynamicpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/dynamicpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,28 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["dynamic.go"],
+    importpath = "google.golang.org/protobuf/types/dynamicpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//internal/errors:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoiface:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["dynamic_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/testprotos/test:go_default_library",
+        "//internal/testprotos/test3:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//testing/prototest:go_default_library",
+    ],
+)
diff -urN a/types/known/anypb/BUILD.bazel b/types/known/anypb/BUILD.bazel
--- a/types/known/anypb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/anypb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,29 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["any.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/anypb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//reflect/protoregistry:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["any_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/testprotos/test:go_default_library",
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "//types/known/emptypb:go_default_library",
+        "//types/known/wrapperspb:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+    ],
+)
diff -urN a/types/known/apipb/BUILD.bazel b/types/known/apipb/BUILD.bazel
--- a/types/known/apipb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/apipb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["api.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/apipb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/known/sourcecontextpb:go_default_library",
+        "//types/known/typepb:go_default_library",
+    ],
+)
diff -urN a/types/known/durationpb/BUILD.bazel b/types/known/durationpb/BUILD.bazel
--- a/types/known/durationpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/durationpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,24 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["duration.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/durationpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["duration_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/types/known/emptypb/BUILD.bazel b/types/known/emptypb/BUILD.bazel
--- a/types/known/emptypb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/emptypb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["empty.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/emptypb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/types/known/fieldmaskpb/BUILD.bazel b/types/known/fieldmaskpb/BUILD.bazel
--- a/types/known/fieldmaskpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/fieldmaskpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,25 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["field_mask.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/fieldmaskpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//proto:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["field_mask_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/testprotos/test:go_default_library",
+        "//proto:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/types/known/sourcecontextpb/BUILD.bazel b/types/known/sourcecontextpb/BUILD.bazel
--- a/types/known/sourcecontextpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/sourcecontextpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["source_context.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/sourcecontextpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/types/known/structpb/BUILD.bazel b/types/known/structpb/BUILD.bazel
--- a/types/known/structpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/structpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,25 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["struct.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/structpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//encoding/protojson:go_default_library",
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["struct_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/types/known/timestamppb/BUILD.bazel b/types/known/timestamppb/BUILD.bazel
--- a/types/known/timestamppb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/timestamppb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,24 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["timestamp.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/timestamppb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
+
+go_test(
+    name = "go_default_test",
+    srcs = ["timestamp_test.go"],
+    embed = [":go_default_library"],
+    deps = [
+        "//internal/detrand:go_default_library",
+        "//testing/protocmp:go_default_library",
+        "@com_github_google_go_cmp//cmp:go_default_library",
+        "@com_github_google_go_cmp//cmp/cmpopts:go_default_library",
+    ],
+)
diff -urN a/types/known/typepb/BUILD.bazel b/types/known/typepb/BUILD.bazel
--- a/types/known/typepb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/typepb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["type.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/typepb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/known/anypb:go_default_library",
+        "//types/known/sourcecontextpb:go_default_library",
+    ],
+)
diff -urN a/types/known/wrapperspb/BUILD.bazel b/types/known/wrapperspb/BUILD.bazel
--- a/types/known/wrapperspb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/known/wrapperspb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,12 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["wrappers.pb.go"],
+    importpath = "google.golang.org/protobuf/types/known/wrapperspb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+    ],
+)
diff -urN a/types/pluginpb/BUILD.bazel b/types/pluginpb/BUILD.bazel
--- a/types/pluginpb/BUILD.bazel	1969-12-31 19:00:00.000000000 -0500
+++ b/types/pluginpb/BUILD.bazel	2020-08-20 01:59:25.000000000 -0400
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["plugin.pb.go"],
+    importpath = "google.golang.org/protobuf/types/pluginpb",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//reflect/protoreflect:go_default_library",
+        "//runtime/protoimpl:go_default_library",
+        "//types/descriptorpb:go_default_library",
+    ],
+)
